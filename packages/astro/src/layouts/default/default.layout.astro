---
import { AppHeader } from '../../components/app-header';
import { AppContent } from '../../components/app-content';
import { HtmlRoot } from '../../components/html-root';
import { getDbUxAstroConfig } from '../../config/config.utils';
import type { DefaultLayoutProps } from './default.layout.types';

const { headings, frontmatter } = {
  headings: [],
  frontmatter: {},
  ...(Astro.props as DefaultLayoutProps),
};

const { appName } = getDbUxAstroConfig();
const pageTitle = frontmatter.title
  ? `${frontmatter.title} | ${appName}`
  : appName;
---

<HtmlRoot title={pageTitle}>
  <div class="dba-header-container">
    <AppHeader client:only="react" />
  </div>
  <AppContent
    title={frontmatter.title}
    headings={headings}
    toc={frontmatter.toc ?? true}
  >
    <slot /></AppContent
  >
</HtmlRoot>

<style>
  .dba-header-container {
    min-height: var(--dba-header-height);
    position: fixed;
    top: 0;
    width: 100svw;
  }
</style>
